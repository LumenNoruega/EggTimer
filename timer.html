<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Temporizador</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>

    <script src="bar.js"></script>
    <main>
        <h1>⏳ Cocinando tu huevo...</h1>
        
        <!-- Contenedor de animación -->
        <div id="eggAnimation">
            <img id="animatedEgg" src="images/egg1.png" width="150">
        </div>
        
        <h2 id="timer">00:00</h2>
        <img id="eggImage" src="images/default.png" width="150">
        <button id="backBtn">Volver</button>
    </main>

  <script>
    const { ipcRenderer } = require("electron");
    let countdown;

    // Imágenes del huevo
    const eggImages = ["images/egg1.png", "images/egg2.png", "images/egg3.png", "images/egg4.png"];
    let currentImageIndex = 0;

    // Animación del huevo
    function animateEgg() {
      const animatedEgg = document.getElementById("animatedEgg");
      setInterval(() => {
        currentImageIndex = (currentImageIndex + 1) % eggImages.length;
        animatedEgg.src = eggImages[currentImageIndex];
      }, 500); 
    }

    function startTimer() {
      let minutes = localStorage.getItem("eggTime");
      let type = localStorage.getItem("eggType");
      let time = minutes * 60;
      const timerDisplay = document.getElementById("timer");
      const eggImage = document.getElementById("eggImage");

      countdown = setInterval(() => {
        let mins = Math.floor(time / 60);
        let secs = time % 60;
        timerDisplay.textContent = `${mins}:${secs < 10 ? "0" : ""}${secs}`;
        time--;

        if (time < 0) {
          clearInterval(countdown);
          timerDisplay.textContent = "¡Listo!";
          eggImage.src = `images/${type}.png`;
          ipcRenderer.send("navigate", "finished.html");
        }
      }, 1000);
    }

    document.getElementById("backBtn").addEventListener("click", () => {
      ipcRenderer.send("navigate", "menu.html");
    });

    animateEgg();
    startTimer();
  </script>
</body>
</html>
